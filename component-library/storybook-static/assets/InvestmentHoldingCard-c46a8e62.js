var V=Object.defineProperty;var A=(l,n,s)=>n in l?V(l,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[n]=s;var e=(l,n,s)=>(A(l,typeof n!="symbol"?n+"":n,s),s);import{i as p,j as c,k as h,C as L,a as g,b as j,d as C,f as u,h as I}from"./card-b76ebb31.js";import{j as t}from"./jsx-runtime-7ce7b810.js";import{r as x}from"./index-37ba2b57.js";import{H}from"./HistoricalAccountBalanceChart-2df4fd0a.js";import{b as P,C as $}from"./Tracker-dcaacf89.js";import{T as k,c as R,a as N,d as B}from"./tabs-1211d8ff.js";class y{constructor(n){e(this,"id",0);e(this,"name","");e(this,"plaidAccountId","");e(this,"costBasis",0);e(this,"institutionPrice",0);e(this,"institutionPriceAsOf","");e(this,"institutionPriceDatetime","");e(this,"institutionValue",0);e(this,"isoCurrencyCode","");e(this,"quantity",0);e(this,"securityId","");e(this,"unofficialCurrencyCode","");n&&Object.assign(this,{...n})}static randomInstance(){return new y({id:p(1,100),name:c(10),plaidAccountId:c(10),costBasis:h(),institutionPrice:h(),institutionPriceAsOf:c(10),institutionPriceDatetime:c(10),institutionValue:h(),isoCurrencyCode:c(10),quantity:p(1,100),securityId:c(10),unofficialCurrencyCode:c(10)})}}const q=x.createContext([]);class f extends x.Component{constructor(s){super(s);e(this,"myRef");this.state={holdings:s.holdings},this.myRef=x.createRef(),this.computeTotalCostBasis=this.computeTotalCostBasis.bind(this),this.computeAverageCostBasis=this.computeAverageCostBasis.bind(this),this.computeAverageCostBasis=this.computeAverageCostBasis.bind(this),this.computeTotalInstitutionValue=this.computeTotalInstitutionValue.bind(this),this.computeTotalProfitLoss=this.computeTotalProfitLoss.bind(this),this.findLargestHolding=this.findLargestHolding.bind(this),this.findSmallestHolding=this.findSmallestHolding.bind(this)}componentWillMount(){}componentDidMount(){this.myRef.current&&this.myRef.current.focus()}computeTotalCostBasis(s){return s.reduce((i,a)=>i+a.costBasis,0)}computeAverageCostBasis(s){return this.computeTotalCostBasis(s)/s.length}computeTotalInstitutionValue(s){return s.reduce((i,a)=>i+a.institutionValue,0)}computeTotalProfitLoss(s){const i=this.computeTotalInstitutionValue(s),a=this.computeTotalCostBasis(s);return i-a}findLargestHolding(s){return s.length===0?null:s.reduce((i,a)=>i.institutionValue>a.institutionValue?i:a)}findSmallestHolding(s){return s.length===0?null:s.reduce((i,a)=>i.institutionValue<a.institutionValue?i:a)}render(){const{className:s,accountName:i,historicalAccountBalance:a}=this.props,{holdings:o}=this.state,b=this.computeTotalCostBasis(o),v=this.computeTotalInstitutionValue(o),w=this.computeTotalProfitLoss(o),T=this.computeAverageCostBasis(o),d=this.findLargestHolding(o),m=this.findSmallestHolding(o);return t.jsx(q.Provider,{value:o,children:t.jsxs(L,{className:s,children:[t.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0",children:[t.jsx(j,{className:"text-xl font-bold",children:i}),t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:"h-4 w-4 text-muted-foreground",children:[t.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),t.jsx("path",{d:"M2 10h20"})]})]}),t.jsxs(C,{children:[t.jsxs("p",{className:"text-lg font-bold",children:["$",u(b,2)," ",t.jsx("span",{className:"text-xs",children:" value across all holdings"})]}),t.jsxs("p",{className:"text-lg font-bold",children:["$",u(v,2)," ",t.jsx("span",{className:"text-xs",children:" institutional value"})]}),t.jsxs("p",{className:"text-lg font-bold",children:["$",u(w,2)," ",t.jsx("span",{className:"text-xs",children:" Total P/L"})]})]}),t.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(j,{className:"text-sm font-bold",children:"Holding Statistics"}),t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:"h-4 w-4 text-muted-foreground",children:t.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})})]}),t.jsx(C,{children:t.jsxs("div",{className:"flex flex-1 flex-wrap gap-3",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("p",{className:"text-md",children:["$ ",u(T,2)]}),t.jsx("p",{className:"font-bold text-xs",children:" average cost basis "})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-md",children:["$",d==null?void 0:d.institutionValue]}),t.jsx("p",{className:"font-bold text-xs",children:" largest holding "})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-md",children:["$",m==null?void 0:m.institutionValue]}),t.jsx("p",{className:"font-bold text-xs",children:" smallest holding "})]})]})}),t.jsx(I,{className:"flex flex-col",children:t.jsxs(k,{defaultValue:"accountBalance",className:"min-w-[400px]",children:[t.jsxs(R,{className:"font-bold",children:[t.jsx(N,{value:"accountBalance",children:"Account Balance"}),t.jsx(N,{value:"costBasis",children:"Security Cost Basis"})]}),t.jsx(B,{value:"accountBalance",children:t.jsx(H,{historicalAccountBalance:a,disableLabel:!0,className:"contain"})}),t.jsx(B,{value:"costBasis",children:t.jsxs(P,{className:"shadow-sm bg-white border rounded-2xl",children:[t.jsx("p",{className:"text-xl",children:"Cost Basis vs. Quantity"}),t.jsx($,{className:"w-full h-80 mt-6 -ml-2",yAxisWidth:50,data:o,category:"name",x:"institutionPrice",y:"quantity",size:"costBasis",showOpacity:!0,minYValue:60,valueFormatter:{x:r=>`$${r}`,y:r=>`${r}`,size:r=>`$${r}`},showLegend:!1,showGridLines:!1})]})})]})})]})})}}e(f,"defaultProps",{accountName:"Account Name"});try{f.displayName="InvestmentHoldingCard",f.__docgenInfo={description:"",displayName:"InvestmentHoldingCard",props:{holdings:{defaultValue:null,description:"",name:"holdings",required:!0,type:{name:"InvesmentHolding[]"}},accountName:{defaultValue:{value:"Account Name"},description:"",name:"accountName",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},historicalAccountBalance:{defaultValue:null,description:"",name:"historicalAccountBalance",required:!1,type:{name:"AccountBalanceHistory[]"}}}}}catch{}export{f as I,y as a};
//# sourceMappingURL=InvestmentHoldingCard-c46a8e62.js.map
